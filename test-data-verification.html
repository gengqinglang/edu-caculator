<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æ•°æ®éªŒè¯æµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-case { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        .result { background: #f5f5f5; padding: 10px; margin: 10px 0; }
        .raw-data { background: #e8f4fd; padding: 10px; margin: 10px 0; }
        .calculated { background: #e8f5e8; padding: 10px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>ğŸ” å¹¼å°åˆè´¹ç”¨æ•°æ®éªŒè¯æµ‹è¯•</h1>
    
    <div class="test-case">
        <h3>æµ‹è¯•æ¡ˆä¾‹ï¼šåŒ—äº¬å…¬ç«‹å°å­¦ - å¹³è¡¡æ•™è‚²é£æ ¼</h3>
        <button onclick="testSpecificCase()">è¿è¡Œæµ‹è¯•</button>
        <div id="testResult"></div>
    </div>

    <!-- å¼•å…¥æ•°æ®æ–‡ä»¶ -->
    <script src="city-tier-mapping.js"></script>
    <script src="primary-cost-data.js"></script>
    <script src="kindergarten-primary-middle-adapter.js"></script>

    <script>
        function testSpecificCase() {
            const resultDiv = document.getElementById('testResult');
            
            try {
                // 1. è·å–åŸå§‹æ•°æ®
                const cityTier = getCityTier('beijing');
                const rawData = PRIMARY_COST_DATA[cityTier]['å…¬ç«‹'];
                
                console.log('åŸå§‹æ•°æ®:', rawData);
                
                // 2. ä½¿ç”¨é€‚é…å™¨è·å–å¤„ç†åçš„æ•°æ®
                const adapter = new KindergartenPrimaryMiddleAdapter();
                const processedData = adapter.getCostData('primary', 'public', 'beijing', 'balanced');
                
                console.log('å¤„ç†åæ•°æ®:', processedData);
                
                // 3. è®¡ç®—æœŸæœ›å€¼ï¼ˆæ‰‹åŠ¨è®¡ç®—å¹³å‡å€¼ï¼‰
                const expectedTuition = Math.round((rawData.tuition.min + rawData.tuition.max) / 2);
                const expectedMeal = Math.round((rawData.meal.min + rawData.meal.max) / 2);
                const expectedMisc = Math.round((rawData.misc.min + rawData.misc.max) / 2);
                const expectedExtracurricular = Math.round((rawData.extracurricular.balanced.min + rawData.extracurricular.balanced.max) / 2);
                
                // 4. å¯¹æ¯”ç»“æœ
                let html = '<div class="raw-data">';
                html += '<h4>ğŸ“Š åŸå§‹æ•°æ® (primary-cost-data.js)</h4>';
                html += `<p><strong>åŸå¸‚ç­‰çº§:</strong> ${cityTier}</p>`;
                html += `<p><strong>å­¦è´¹:</strong> ${rawData.tuition.min} - ${rawData.tuition.max} å…ƒ/å¹´</p>`;
                html += `<p><strong>é¤è´¹:</strong> ${rawData.meal.min} - ${rawData.meal.max} å…ƒ/å¹´</p>`;
                html += `<p><strong>æ‚è´¹:</strong> ${rawData.misc.min} - ${rawData.misc.max} å…ƒ/å¹´</p>`;
                html += `<p><strong>è¯¾å¤–è´¹(å¹³è¡¡):</strong> ${rawData.extracurricular.balanced.min} - ${rawData.extracurricular.balanced.max} å…ƒ/å¹´</p>`;
                html += '</div>';
                
                html += '<div class="calculated">';
                html += '<h4>ğŸ§® é€‚é…å™¨è®¡ç®—ç»“æœ</h4>';
                html += `<p><strong>å­¦è´¹:</strong> ${processedData.costs['å­¦è´¹'].amount} å…ƒ/å¹´ (æœŸæœ›: ${expectedTuition})</p>`;
                html += `<p><strong>é¤è´¹:</strong> ${processedData.costs['é¤è´¹'].amount} å…ƒ/å¹´ (æœŸæœ›: ${expectedMeal})</p>`;
                html += `<p><strong>æ‚è´¹:</strong> ${processedData.costs['æ‚è´¹'].amount} å…ƒ/å¹´ (æœŸæœ›: ${expectedMisc})</p>`;
                html += `<p><strong>è¯¾å¤–è´¹:</strong> ${processedData.costs['è¯¾å¤–è´¹'].amount} å…ƒ/å¹´ (æœŸæœ›: ${expectedExtracurricular})</p>`;
                html += `<p><strong>æ•™è‚²é£æ ¼:</strong> ${processedData.educationStyle}</p>`;
                html += '</div>';
                
                // 5. éªŒè¯ç»“æœ
                const tuitionMatch = processedData.costs['å­¦è´¹'].amount === expectedTuition;
                const mealMatch = processedData.costs['é¤è´¹'].amount === expectedMeal;
                const miscMatch = processedData.costs['æ‚è´¹'].amount === expectedMisc;
                const extracurricularMatch = processedData.costs['è¯¾å¤–è´¹'].amount === expectedExtracurricular;
                
                html += '<div class="result">';
                html += '<h4>âœ… éªŒè¯ç»“æœ</h4>';
                html += `<p>å­¦è´¹åŒ¹é…: ${tuitionMatch ? 'âœ…' : 'âŒ'}</p>`;
                html += `<p>é¤è´¹åŒ¹é…: ${mealMatch ? 'âœ…' : 'âŒ'}</p>`;
                html += `<p>æ‚è´¹åŒ¹é…: ${miscMatch ? 'âœ…' : 'âŒ'}</p>`;
                html += `<p>è¯¾å¤–è´¹åŒ¹é…: ${extracurricularMatch ? 'âœ…' : 'âŒ'}</p>`;
                
                const allMatch = tuitionMatch && mealMatch && miscMatch && extracurricularMatch;
                html += `<p><strong>æ€»ä½“ç»“æœ: ${allMatch ? 'âœ… æ•°æ®å®Œå…¨åŒ¹é…' : 'âŒ å­˜åœ¨ä¸åŒ¹é…'}</strong></p>`;
                html += '</div>';
                
                // 6. æµ‹è¯•ä¸åŒæ•™è‚²é£æ ¼
                html += '<div class="result">';
                html += '<h4>ğŸ¯ ä¸åŒæ•™è‚²é£æ ¼çš„è¯¾å¤–è´¹å¯¹æ¯”</h4>';
                
                const relaxedData = adapter.getCostData('primary', 'public', 'beijing', 'relaxed');
                const balancedData = adapter.getCostData('primary', 'public', 'beijing', 'balanced');
                const intensiveData = adapter.getCostData('primary', 'public', 'beijing', 'intensive');
                
                html += `<p>ä½›ç³»: ${relaxedData.costs['è¯¾å¤–è´¹'].amount} å…ƒ/å¹´</p>`;
                html += `<p>å¹³è¡¡: ${balancedData.costs['è¯¾å¤–è´¹'].amount} å…ƒ/å¹´</p>`;
                html += `<p>é¸¡å¨ƒ: ${intensiveData.costs['è¯¾å¤–è´¹'].amount} å…ƒ/å¹´</p>`;
                
                const expectedRelaxed = Math.round((rawData.extracurricular.relaxed.min + rawData.extracurricular.relaxed.max) / 2);
                const expectedIntensive = Math.round((rawData.extracurricular.intensive.min + rawData.extracurricular.intensive.max) / 2);
                
                html += `<p>æœŸæœ›å€¼å¯¹æ¯”:</p>`;
                html += `<p>- ä½›ç³»æœŸæœ›: ${expectedRelaxed} å…ƒ/å¹´ ${relaxedData.costs['è¯¾å¤–è´¹'].amount === expectedRelaxed ? 'âœ…' : 'âŒ'}</p>`;
                html += `<p>- é¸¡å¨ƒæœŸæœ›: ${expectedIntensive} å…ƒ/å¹´ ${intensiveData.costs['è¯¾å¤–è´¹'].amount === expectedIntensive ? 'âœ…' : 'âŒ'}</p>`;
                html += '</div>';
                
                resultDiv.innerHTML = html;
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="result" style="color: red;">âŒ æµ‹è¯•å¤±è´¥: ${error.message}</div>`;
                console.error('æµ‹è¯•é”™è¯¯:', error);
            }
        }
    </script>
</body>
</html>
